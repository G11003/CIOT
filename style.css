/* ==========================================================================
   CSS COMPLETO - VERSIÓN "NO SCROLL" & "ZOOM OUT" (ESCALA REDUCIDA)
   ========================================================================== */

:root {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  
  /* --- COLORES --- */
  --background: oklch(0 0 0);
  --foreground: oklch(1 0 0);
  --card: oklch(0.1 0 0);
  --accent: oklch(90.278% 0.15557 190.75);
  --chart-4: oklch(0.65 0.28 330);
  --muted-foreground: oklch(0.6 0 0);
  --primary: oklch(89.087% 0.22975 131.309);
  --destructive: oklch(0.6 0.25 25);
  --border: oklch(0.25 0.1 195);
  --secondary: oklch(77.678% 0.14611 224.157);
  --purple: oklch(63.708% 0.21862 298.316);
}

/* ==========================================================================
   1. AJUSTE DE ESCALA GLOBAL (LA MAGIA)
   ========================================================================== */
html {
  /* IMPORTANTE: 10px es aprox el 62.5% de 16px (estándar).
     Esto simula un "Zoom al 60%" en toda la interfaz automáticamente
     porque usas unidades 'rem' en todo el diseño.
  */
  font-size: 10px; 
  
  height: 100vh;
  width: 100vw;
  overflow: hidden; /* Prohibido el scroll global */
}

body {
  margin: 0;
  padding: 0;
  background-color: var(--background);
  color: var(--foreground);
  height: 100vh;
  width: 100%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

* {
  box-sizing: border-box;
  border-color: var(--border);
  outline-color: oklch(var(--primary) / 0.5);
}

/* ==========================================================================
   2. NAVBAR FIJA
   ========================================================================== */
.navbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 6rem; /* 60px reales a esta escala */
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: var(--card);
  border-bottom: 1px solid var(--border);
  z-index: 1000;
  padding: 0 2rem;
}

.navbar-list {
  display: flex;
  gap: 2rem;
  list-style: none;
  margin: 0; padding: 0;
}

.navbar-link {
  font-family: monospace;
  font-size: 1.4rem; /* Texto legible */
  color: var(--muted-foreground);
  text-decoration: none;
  padding: 0.8rem 1.5rem;
  border-radius: 0.5rem;
  transition: all 0.2s;
}

.navbar-link:hover { color: var(--foreground); background-color: oklch(var(--primary) / 0.1); }
.navbar-link.is-active {
  color: var(--primary);
  font-weight: 700;
  background-color: oklch(var(--primary) / 0.1);
  box-shadow: 0 0 15px oklch(var(--primary) / 0.3);
}

/* ==========================================================================
   3. CONTENEDOR PRINCIPAL (MAIN)
   ========================================================================== */
main {
  /* Padding top exacto para que no se oculte tras la navbar */
  padding-top: 6rem; 
  height: 100vh; /* Ocupa toda la pantalla */
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  /* Margen interno para que el contenido respire un poco */
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-bottom: 1.5rem;
}

/* ==========================================================================
   4. PÁGINA: CONTROL (control.html)
   ========================================================================== */
.control-panel-container {
  width: 100%;
  max-width: 80rem;
  height: 100%; /* Llenar verticalmente */
  display: flex;
  flex-direction: column;
  justify-content: space-between; /* Distribuir espacio */
  padding-bottom: 1rem;
}

.header { text-align: center; flex-shrink: 0; margin-bottom: 1rem; }
.header h1 { font-size: 2.5rem; margin: 0; line-height: 1.2; }
.header .subtitle { font-size: 1.2rem; color: var(--primary); font-family: monospace; }

/* Wrapper de velocidad */
.speed-control-wrapper {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin: 1rem auto;
  background: var(--card);
  padding: 0.5rem;
  border-radius: 1rem;
  border: 1px solid var(--border);
}
.speed-button {
  background: transparent; border: none; color: var(--muted-foreground);
  font-family: monospace; font-size: 1.2rem; padding: 0.5rem 1rem; cursor: pointer;
  border-radius: 0.5rem;
}
.speed-button.is-active { background: var(--primary); color: var(--background); }

/* Controles principales */
.controls-wrapper {
  flex: 1; /* Ocupa todo el espacio disponible */
  display: flex;
  flex-direction: column;
  justify-content: center; /* Centrado vertical */
  align-items: center;
  gap: 1.5rem;
  min-height: 0; /* Permite encoger si hace falta */
}

/* Grid de flechas */
.primary-movement-grid {
  display: grid;
  gap: 0.8rem;
  grid-template-areas: "fwd-l fwd fwd-r" ". stop ." "bwd-l bwd bwd-r";
}

/* Botones cuadrados */
.control-button {
  position: relative;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  width: 6rem; height: 6rem; /* Se ven pequeños gracias a la escala del html */
  border: 2px solid transparent; border-radius: 1.5rem;
  cursor: pointer; transition: all 0.2s;
}
.control-button:active { transform: scale(0.95); }
.control-button .icon { font-size: 2.5rem; margin: 0; line-height: 1; }
/* Ocultamos labels para ahorrar espacio */
.control-button .label { display: none; } 

/* Sección rotación */
.rotation-controls { padding-top: 1rem; border-top: 1px solid oklch(var(--primary)/0.2); }
.rotation-grid { display: flex; gap: 1.5rem; }
.rotation-column { display: flex; flex-direction: column; gap: 0.8rem; }

.footer { text-align: center; font-size: 1rem; color: var(--muted-foreground); flex-shrink: 0; }

/* Colores botones */
.color-cyan { background: oklch(var(--primary)/0.1); border-color: var(--primary); color: var(--primary); }
.color-cyan:hover { background: oklch(var(--primary)/0.2); }
.color-magenta { background: oklch(var(--secondary)/0.1); border-color: var(--secondary); color: var(--secondary); }
.color-magenta:hover { background: oklch(var(--secondary)/0.2); }
.color-red { background: oklch(var(--destructive)/0.1); border-color: var(--destructive); color: var(--destructive); }
.color-red:hover { background: oklch(var(--destructive)/0.2); }
.color-purple { background: oklch(var(--purple)/0.1); border-color: var(--purple); color: var(--purple); }
.color-purple:hover { background: oklch(var(--purple)/0.2); }
.color-green { background: oklch(var(--accent)/0.1); border-color: var(--accent); color: var(--accent); }
.color-blue { background: oklch(var(--chart-4)/0.1); border-color: var(--chart-4); color: var(--chart-4); }

/* ==========================================================================
   5. PÁGINA: MONITOR (monitor.html) - AJUSTE PERFECTO
   ========================================================================== */
.monitor-dashboard-grid {
  display: grid;
  width: 100%;
  height: 100%; /* Ocupar 100% del main */
  gap: 1.5rem;
  
  /* FILAS:
     1. Estatus Superior: 18% de la altura
     2. Logs (Centro):    El espacio que sobre (1fr)
     3. Gestión (Abajo):  12% de la altura
  */
  grid-template-rows: 18vh 1fr 12vh;
  grid-template-columns: repeat(12, 1fr);
  
  grid-template-areas:
    "last-move      last-move      last-move      last-move      last-move      last-move      last-obstacle    last-obstacle      last-obstacle    last-obstacle      last-obstacle    last-obstacle"
    "moves-log      moves-log      moves-log      moves-log      obstacle-log     obstacle-log     obstacle-log     obstacle-log       demos-log        demos-log        demos-log        demos-log"
    "obstacle-mgmt obstacle-mgmt   obstacle-mgmt obstacle-mgmt obstacle-mgmt    obstacle-mgmt obstacle-mgmt obstacle-mgmt    obstacle-mgmt obstacle-mgmt    obstacle-mgmt obstacle-mgmt";
}

/* Cajas Generales */
.monitor-status-box, .monitor-log-box {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 1.5rem;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* IMPORTANTE: Para que el contenido no desborde */
  min-height: 0;    /* IMPORTANTE: Para que Flexbox permita encoger */
}

/* Asignación de Areas */
#box-last-move { grid-area: last-move; }
#box-last-obstacle { grid-area: last-obstacle; }
#box-moves-log { grid-area: moves-log; }
#box-obstacles-log { grid-area: obstacle-log; }
#box-demos-log { grid-area: demos-log; }
#box-obstacle-mgmt { grid-area: obstacle-mgmt; flex-direction: row; align-items: center; justify-content: space-between; }

/* Títulos */
.monitor-status-box h2, .monitor-log-box h2 {
  font-size: 1.4rem; color: var(--primary); margin: 0 0 1rem 0;
  border-bottom: 1px solid var(--border); padding-bottom: 0.5rem;
  white-space: nowrap; flex-shrink: 0;
}

/* Texto Grande (Estatus) */
.status-text-large {
  font-size: 2.2rem; font-weight: 500; color: var(--foreground);
  display: flex; align-items: center; justify-content: center;
  flex-grow: 1; text-align: center;
}

/* Listas con Scroll Interno */
.monitor-log-list {
  flex: 1; /* Ocupa el espacio restante de la caja */
  overflow-y: auto; /* Scroll AQUI, no en la página */
  list-style: none; padding: 0; margin: 0;
  font-family: monospace; font-size: 1.1rem; color: var(--muted-foreground);
  height: 100%; /* Forzar altura */
}

.monitor-log-list li { padding: 0.4rem 0; border-bottom: 1px solid oklch(var(--border)/0.2); }
.monitor-log-list li:first-child { color: var(--foreground); font-weight: 700; }

/* Botón Gestión */
#obstacle-action-text { font-size: 1.4rem; margin: 0; }
.execute-action-btn {
  background: var(--purple); color: var(--background);
  font-family: monospace; font-weight: 700; font-size: 1.2rem;
  padding: 0.8rem 2rem; border: none; border-radius: 0.8rem;
  cursor: pointer; height: auto;
}

/* ==========================================================================
   6. PÁGINA: DEMOS (demos.html) - SIN SCROLL
   ========================================================================== */
.demo-layout-container {
  display: flex;
  flex-direction: row; /* Dos columnas lado a lado */
  gap: 2rem;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Columna Izquierda (Controles) */
.demo-controls-container {
  width: 25rem; /* Ancho fijo */
  flex-shrink: 0;
  border: 1px solid var(--border);
  border-radius: 1.5rem;
  background: var(--card);
  padding: 1.5rem;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  overflow-y: auto; /* Scroll si es muy pequeño el alto */
}
/* Reducimos un poco los botones del panel izquierdo de demos */
.demo-controls-container .control-button { width: 5rem; height: 5rem; }
.demo-controls-container .icon { font-size: 2rem; }

/* Columna Derecha (Secuenciador) */
.demo-sequencer-wrapper {
  flex: 1; /* Ocupa el resto del ancho */
  display: flex;
  flex-direction: column; /* Apilados verticalmente */
  gap: 1.5rem;
  height: 100%;
}

/* Sección Ejecutar y Crear (Mitad y Mitad) */
.demo-run-section, .demo-create-section {
  flex: 1; /* Repartir altura 50% / 50% */
  background: var(--card); border: 1px solid var(--border); border-radius: 1.5rem;
  padding: 1.5rem;
  display: flex; flex-direction: column;
  min-height: 0; /* Permite encogerse */
  overflow: hidden;
}

.demo-run-section h2, .demo-create-section h2 {
  font-size: 1.8rem; margin: 0 0 1rem 0; color: var(--foreground);
  border-bottom: 1px solid var(--border); padding-bottom: 0.5rem;
  flex-shrink: 0;
}

.input-label { font-size: 1rem; color: var(--muted-foreground); margin-bottom: 0.5rem; font-family: monospace; }
.demo-input {
  background: oklch(0.05 0 0); border: 1px solid var(--border); color: var(--foreground);
  padding: 0.8rem; border-radius: 0.8rem; font-size: 1.2rem; width: 100%;
  margin-bottom: 1rem;
}

/* Lista de movimientos CREAR DEMO (Scroll interno) */
.demo-moves-list {
  flex: 1; /* Ocupa el espacio disponible */
  overflow-y: auto; /* SCROLL AQUI */
  background: oklch(0.05 0 0); border: 1px solid var(--border); border-radius: 0.8rem;
  margin: 0; padding: 0.5rem; list-style: none;
}
.demo-move-item {
  display: flex; justify-content: space-between; padding: 0.5rem 1rem;
  border-bottom: 1px solid oklch(var(--border)/0.5); font-family: monospace; font-size: 1.2rem;
}

/* Botones Grandes Acción */
.run-demo-btn, .save-demo-btn, .delete-demo-btn, .pause-demo-btn, .stop-demo-btn, .resume-demo-btn {
  width: 100%; padding: 1rem; font-family: monospace; font-weight: 700; font-size: 1.2rem;
  border: none; border-radius: 0.8rem; cursor: pointer; margin-top: 0.5rem;
}
.run-demo-btn { background: var(--accent); color: var(--background); }
.save-demo-btn { background: var(--primary); color: var(--background); }
.delete-demo-btn { background: var(--destructive); color: var(--foreground); }
.pause-demo-btn { background: var(--purple); color: var(--background); }

/* Ajuste responsive básico (Móvil vertical) */
@media (max-width: 768px) {
  html { font-size: 9px; /* Aún más pequeño en móvil */ height: auto; overflow: auto; }
  body { height: auto; overflow: auto; display: block; }
  main { height: auto; overflow: visible; display: block; padding-top: 7rem;}
  .monitor-dashboard-grid { display: flex; flex-direction: column; height: auto; }
  .demo-layout-container { flex-direction: column; height: auto; }
  .control-button { width: 7rem; height: 7rem; }
}
